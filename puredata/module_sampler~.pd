#N canvas 959 274 582 690 10;
#N canvas 552 260 450 352 save 0;
#X obj 32 223 kollabs/ds_reg utz /utz/\$1/volume;
#X obj 32 13 kollabs/ds_reg utz /utz/\$1/file;
#X obj 32 73 kollabs/ds_reg utz /utz/\$1/loop;
#X obj 32 94 kollabs/ds_reg utz /utz/\$1/left;
#X obj 32 114 kollabs/ds_reg utz /utz/\$1/right;
#X obj 32 134 kollabs/ds_reg utz /utz/\$1/pitch;
#X obj 32 154 kollabs/ds_reg utz /utz/\$1/reverse;
#X restore 439 214 pd save;
#X obj 130 604 outlet~;
#X obj 129 381 *~;
#X text 157 382 VCA;
#N canvas 1006 638 450 300 midi 0;
#X obj 101 150 r \$0-midi;
#X obj 101 173 clip 0 1;
#X obj 101 91 kollabs/midi_r \$5 \$0-midi \$2 \$4 \$3;
#X obj 101 196 s /\$5/\$1/velocity;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X restore 439 244 pd midi;
#X text 327 51 \$1: module name;
#X text 327 67 \$2: midi msg type;
#X text 327 100 \$4: midi value;
#X text 327 83 \$3: midi channel;
#N canvas 685 104 1232 721 param-parse 0;
#X obj 98 81 inlet;
#X obj 108 508 r /utz/\$1/left;
#X obj 152 458 r /utz/\$1/right;
#X obj 196 408 r /utz/\$1/pitch;
#X obj 240 358 r /utz/\$1/reverse;
#X obj 285 308 r /utz/\$1/loop;
#X obj 328 256 r /utz/\$1/file;
#X obj 373 206 r /utz/\$1/load;
#X obj 417 156 r /utz/\$1/reset;
#X obj 558 154 route attack decay sustain release;
#X obj 558 202 s \$0-attack;
#X obj 568 182 r /utz/\$1/attack;
#X obj 627 261 r /utz/\$1/decay;
#X obj 617 281 s \$0-decay;
#X obj 686 221 r /utz/\$1/sustain;
#X obj 675 241 s \$0-sustain;
#X obj 743 180 r /utz/\$1/release;
#X obj 733 200 s \$0-release;
#X obj 923 179 route volume mute;
#X msg 923 247 volume \$1;
#X msg 981 267 mute \$1;
#X obj 933 222 r /utz/\$1/volume;
#X obj 1013 242 r /utz/\$1/mute;
#X obj 923 307 s \$0-volume-ctl;
#X obj 470 575 s \$0-sampler-ctl;
#X msg 98 530 left \$1;
#X msg 142 480 right \$1;
#X msg 186 430 pitch \$1;
#X msg 230 380 reverse \$1;
#X msg 275 330 loop \$1;
#X msg 363 228 load \$1;
#X msg 407 178 reset \$1;
#X obj 319 280 iemlib/iem_prepend file;
#X obj 98 117 route left right pitch reverse loop file load reset;
#X connect 0 0 33 0;
#X connect 1 0 25 0;
#X connect 2 0 26 0;
#X connect 3 0 27 0;
#X connect 4 0 28 0;
#X connect 5 0 29 0;
#X connect 6 0 32 0;
#X connect 7 0 30 0;
#X connect 8 0 31 0;
#X connect 9 0 10 0;
#X connect 9 1 13 0;
#X connect 9 2 15 0;
#X connect 9 3 17 0;
#X connect 9 4 18 0;
#X connect 11 0 10 0;
#X connect 12 0 13 0;
#X connect 14 0 15 0;
#X connect 16 0 17 0;
#X connect 18 0 19 0;
#X connect 18 1 20 0;
#X connect 19 0 23 0;
#X connect 20 0 23 0;
#X connect 21 0 19 0;
#X connect 22 0 20 0;
#X connect 25 0 24 0;
#X connect 26 0 24 0;
#X connect 27 0 24 0;
#X connect 28 0 24 0;
#X connect 29 0 24 0;
#X connect 30 0 24 0;
#X connect 31 0 24 0;
#X connect 32 0 24 0;
#X connect 33 0 25 0;
#X connect 33 1 26 0;
#X connect 33 2 27 0;
#X connect 33 3 28 0;
#X connect 33 4 29 0;
#X connect 33 5 32 0;
#X connect 33 6 30 0;
#X connect 33 7 31 0;
#X connect 33 8 9 0;
#X restore 180 81 pd param-parse;
#X obj 180 23 inlet ctl-in;
#X obj 147 239 r \$0-velocity;
#X obj 162 259 r \$0-attack;
#X obj 177 279 r \$0-decay;
#X obj 192 299 r \$0-sustain;
#X obj 207 319 r \$0-release;
#N canvas 2 87 457 313 init 0;
#X obj 115 42 loadbang;
#X obj 182 94 s \$0-attack;
#X obj 182 134 s \$0-decay;
#X obj 182 174 s \$0-sustain;
#X obj 182 214 s \$0-release;
#X msg 182 75 0;
#X msg 182 115 100;
#X msg 182 155 0.9;
#X msg 182 195 40;
#X connect 0 0 5 0;
#X connect 0 0 6 0;
#X connect 0 0 7 0;
#X connect 0 0 8 0;
#X connect 5 0 1 0;
#X connect 6 0 2 0;
#X connect 7 0 3 0;
#X connect 8 0 4 0;
#X restore 439 185 pd init;
#X obj 147 343 env_adsr~;
#X obj 204 545 r \$0-volume-ctl;
#X obj 130 566 env_volume~;
#X obj 130 206 sgn_sampler~;
#X obj 211 178 r \$0-sampler-ctl;
#X obj 130 476 lop~ 22000;
#X obj 130 455 hip~ 10;
#X obj 130 158 r \$0-trigger;
#X obj 44 22 inlet velocity;
#N canvas 185 512 504 494 triggering 1;
#X obj 63 17 inlet velocity;
#X text 59 329 \$0-trigger goes to sampler;
#X text 180 206 if envelope isn't yet down to zero;
#X text 59 350 \$0-velocity goes to envelope;
#X obj 63 245 s \$0-velocity;
#X obj 185 295 s \$0-trigger;
#X obj 63 208 t f f;
#X obj 63 180 clip 0 1;
#X obj 185 245 sel 0;
#X msg 217 268 1;
#X text 194 187 TODO: sampler mustn't be stopped;
#X text 299 225 to avoid clicking;
#X obj 74 40 r /utz/\$1/velocity;
#X msg 185 268 0;
#X msg 115 159 1;
#X text 151 162 interpret bang as maximum velocity;
#X floatatom 16 221 5 0 0 0 - - -, f 5;
#X obj 63 68 route float bang symbol;
#X obj 168 90 route stop;
#X msg 168 143 0;
#X obj 178 117 r /utz/\$1/stop;
#X connect 0 0 17 0;
#X connect 6 0 4 0;
#X connect 6 1 8 0;
#X connect 7 0 6 0;
#X connect 7 0 16 0;
#X connect 8 0 13 0;
#X connect 8 1 9 0;
#X connect 9 0 5 0;
#X connect 12 0 17 0;
#X connect 14 0 7 0;
#X connect 17 0 7 0;
#X connect 17 1 14 0;
#X connect 17 2 18 0;
#X connect 18 0 19 0;
#X connect 19 0 7 0;
#X connect 20 0 19 0;
#X restore 44 80 pd triggering;
#X obj 103 50 r /\$5/\$1;
#X text 327 116 \$5: domain name;
#X connect 2 0 23 0;
#X connect 10 0 9 0;
#X connect 11 0 17 0;
#X connect 12 0 17 1;
#X connect 13 0 17 2;
#X connect 14 0 17 3;
#X connect 15 0 17 4;
#X connect 17 0 2 1;
#X connect 18 0 19 1;
#X connect 19 0 1 0;
#X connect 20 0 2 0;
#X connect 21 0 20 1;
#X connect 22 0 19 0;
#X connect 23 0 22 0;
#X connect 24 0 20 0;
#X connect 25 0 26 0;
#X connect 27 0 26 0;
#X connect 27 0 9 0;
